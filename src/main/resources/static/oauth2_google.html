<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Login Test</title>
    <!-- Script của Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
<!-- Khởi tạo Google Login -->
<div id="g_id_onload"
     data-client_id="711156209427-i9t1kcc0705ggtifi24j477k3pvc5e11.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
     data-callback="handleCredentialResponse"
     data-auto_prompt="false">
</div>

<!-- Nút login Google -->
<div class="g_id_signin"
     data-type="standard"
     data-size="large"
     data-theme="outline"
     data-text="signin_with"
     data-shape="rect"
     data-logo_alignment="left">
</div>

<script>
    function handleCredentialResponse(response) {
      // Đây chính là Google ID Token (JWT)
      const idToken = response.credential;
      console.log("ID Token từ Google:", idToken);

      // Gửi token này lên backend của bạn
      fetch("http://localhost:8080/auth/oauth2/google/callback", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ idToken: idToken })
      })
      .then(res => res.json())
      .then(data => {
        console.log("BE trả về:", data);
        alert("AccessToken: " + data.accessToken);
        alert("RefreshToken: " + data.refreshToken);
      })
      .catch(err => console.error(err));
    }
</script>
</body>
</html>
